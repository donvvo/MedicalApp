{% extends "base.html" %}
{% load static %}

{% block content %}

<!-- Single Doctor-->
<section class="profile-doctor generic animated fadeInUp">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="section-title">
                    <h3>Settings</h3>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-10">
                <div class="row">
                    <form id="request" action="{{request.path}}" method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                    <div class="col-sm-3 text-center">
                        <figure>
                            {% if object.image %}
                            <img id="preview" src="{{object.image.url}}" class="img-responsive" alt="">
                            {% else %}
                            <img id="preview" src="{% static 'img/profile-img.png' %}" class="img-responsive" alt="">
                            {% endif %}
                        </figure>
                        {{form.image}}
                    </div>
                    <div class="col-sm-8">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        {% for error in form.first_name.errors %}
                                          <span class="errorlist">{{error}}</span>
                                        {% endfor %}
                                    </div>
                                    {{form.first_name}}
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        {% for error in form.last_name.errors %}
                                          <span class="errorlist">{{error}}</span>
                                        {% endfor %}
                                    </div>
                                    {{form.last_name}}
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <div class="col-sm-12">
                                        {% for error in form.summary.errors %}
                                          <span class="errorlist">{{error}}</span>
                                        {% endfor %}
                                    </div>
                                    <label for="message" class="sr-only">About Me</label>
                                    <i class="glyphicon glyphicon-pencil">
                                        {{form.summary}}
                                    </i>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-6">

                                <div class="form-group">
                                    <div class="col-sm-6">
                                        {% for error in form.contact.errors %}
                                          <span class="errorlist">{{error}}</span>
                                        {% endfor %}
                                    </div>
                                    <label for="phone" class="sr-only">Phone number</label>
                                    <i class="glyphicon glyphicon-erase">
                                        {{form.contact}}
                                    </i>
                                </div>
                            </div>
                        </div>
                        <input type="submit" class="btn btn-default btn-color-bg btn-no-radius" value="Save">
                    </div>
                    <div class="col-sm-1">
                        <hr>
                        <input type="submit" class="btn btn-default btn-color-bg-dark-border" value="Delete Doctor" name="Delete">
                    </div>
                    </form>
                </div>

            </div>

        </div>

    </div>
</section>
<!-- End News -->


{% endblock content %}

{% block javascript %}

{{block.super}}

<script>
    $("#id_image").addClass('file-loading');
    $("#id_image").fileinput({
        browseClass: "btn btn-default btn-color-bg btn-no-radius",
        browseLabel: "Change Photo",
        showPreview: false,
        showCaption: false,
        showUpload: false,
        showUploadedThumbs: false
    });
    $('#id_image').on('fileloaded', function(event, file, previewId, index, reader) {
        $('#preview').attr('src', URL.createObjectURL(file));
    });
    $('#id_image').on('fileclear', function(event) {
        console.log('remove');
        $('#preview').attr('src', "{% static 'img/profile-img.png' %}");
    });
</script>

{% endblock javascript %}